<template>
  <div>
<!--Begin Header Begin-->
<div class="soubg">
  <div class="sou">
    <!--Begin 所在收货地区 Begin-->
    <span class="s_city_b">
        	<span class="fl">送货至：</span>
            <span class="s_city">
            	<span>四川</span>
                <div class="s_city_bg">
                	<div class="s_city_t"></div>
                    <div class="s_city_c">
                    	<h2>请选择所在的收货地区</h2>
                        <table border="0" class="c_tab" style="width:235px; margin-top:10px;" cellspacing="0" cellpadding="0">
                          <tr>
                            <th>A</th>
                            <td class="c_h"><span>安徽</span><span>澳门</span></td>
                          </tr>
                          <tr>
                            <th>B</th>
                            <td class="c_h"><span>北京</span></td>
                          </tr>
                          <tr>
                            <th>C</th>
                            <td class="c_h"><span>重庆</span></td>
                          </tr>
                          <tr>
                            <th>F</th>
                            <td class="c_h"><span>福建</span></td>
                          </tr>
                          <tr>
                            <th>G</th>
                            <td class="c_h"><span>广东</span><span>广西</span><span>贵州</span><span>甘肃</span></td>
                          </tr>
                          <tr>
                            <th>H</th>
                            <td class="c_h"><span>河北</span><span>河南</span><span>黑龙江</span><span>海南</span><span>湖北</span><span>湖南</span></td>
                          </tr>
                          <tr>
                            <th>J</th>
                            <td class="c_h"><span>江苏</span><span>吉林</span><span>江西</span></td>
                          </tr>
                          <tr>
                            <th>L</th>
                            <td class="c_h"><span>辽宁</span></td>
                          </tr>
                          <tr>
                            <th>N</th>
                            <td class="c_h"><span>内蒙古</span><span>宁夏</span></td>
                          </tr>
                          <tr>
                            <th>Q</th>
                            <td class="c_h"><span>青海</span></td>
                          </tr>
                          <tr>
                            <th>S</th>
                            <td class="c_h"><span>上海</span><span>山东</span><span>山西</span><span class="c_check">四川</span><span>陕西</span></td>
                          </tr>
                          <tr>
                            <th>T</th>
                            <td class="c_h"><span>台湾</span><span>天津</span></td>
                          </tr>
                          <tr>
                            <th>X</th>
                            <td class="c_h"><span>西藏</span><span>香港</span><span>新疆</span></td>
                          </tr>
                          <tr>
                            <th>Y</th>
                            <td class="c_h"><span>云南</span></td>
                          </tr>
                          <tr>
                            <th>Z</th>
                            <td class="c_h"><span>浙江</span></td>
                          </tr>
                        </table>
                    </div>
                </div>
            </span>
        </span>
    <!--End 所在收货地区 End-->
    <span class="fr">
        	<span class="fl"></span>
        	<span class="ss">
            	<div class="ss_list">
                	<a href="#">收藏夹</a>
                    <div class="ss_list_bg">
                    	<div class="s_city_t"></div>
                        <div class="ss_list_c">
                        	<ul>
                            	<li><a href="#">我的收藏夹</a></li>
                                <li><a href="#">我的收藏夹</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="ss_list">
                	<a href="#">客户服务</a>
                    <div class="ss_list_bg">
                    	<div class="s_city_t"></div>
                        <div class="ss_list_c">
                        	<ul>
                            	<li><a href="#">客户服务</a></li>
                                <li><a href="#">客户服务</a></li>
                                <li><a href="#">客户服务</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="ss_list">
                	<a href="#">网站导航</a>
                    <div class="ss_list_bg">
                    	<div class="s_city_t"></div>
                        <div class="ss_list_c">
                        	<ul>
                            	<li><a href="#">网站导航</a></li>
                                <li><a href="#">网站导航</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </span>
            <span class="fl">|&nbsp;关注我们：</span>
            <span class="s_sh"><a href="#" class="sh1">新浪</a><a href="#" class="sh2">微信</a></span>
            <span class="fr">|&nbsp;<a href="#">手机版&nbsp;<img src="../assets/images/s_tel.png" align="absmiddle" /></a></span>
        </span>
  </div>
</div>
<div class="m_top_bg">
  <div class="top">
    <div class="m_logo"><a href="Index.html"><img src="../assets/images/logo1.png" /></a></div>
    <div class="m_search">
      <form>
        <input type="text" value="" class="m_ipt" />
        <input type="submit" value="搜索" class="m_btn" />
      </form>
      <span class="fl"><a href="#">咖啡</a><a href="#">iphone 6S</a><a href="#">新鲜美食</a><a href="#">蛋糕</a><a href="#">日用品</a><a href="#">连衣裙</a></span>
    </div>

  </div>
</div>
<!--End Header End-->
<div class="i_bg bg_color">
  <!--Begin 用户中心 Begin -->
  <div class="m_content">
    <div class="m_left">
      <div class="left_n">管理中心</div>
      <div class="left_m">
        <div class="left_m_t t_bg1">订单中心</div>
        <ul>
          <li><a href="Member_Order.html">我的订单</a></li>
          <li><a href="Member_Address.html" class="now">收货地址</a></li>
          <li><a href="#">缺货登记</a></li>
          <li><a href="#">跟踪订单</a></li>
        </ul>
      </div>
      <div class="left_m">
        <div class="left_m_t t_bg2">会员中心</div>
        <ul>
          <li><a href="Member_User.html">用户信息</a></li>
          <li><a href="Member_Collect.html">我的收藏</a></li>
          <li><a href="Member_Msg.html">我的留言</a></li>
          <li><a href="Member_Links.html">推广链接</a></li>
          <li><a href="#">我的评论</a></li>
        </ul>
      </div>
      <div class="left_m">
        <div class="left_m_t t_bg3">账户中心</div>
        <ul>
          <li><a href="Member_Safe.html">账户安全</a></li>
          <li><a href="Member_Packet.html">我的红包</a></li>
          <li><a href="Member_Money.html">资金管理</a></li>
        </ul>
      </div>
      <div class="left_m">
        <div class="left_m_t t_bg4">分销中心</div>
        <ul>
          <li><a href="Member_Member.html">我的会员</a></li>
          <li><a href="Member_Results.html">我的业绩</a></li>
          <li><a href="Member_Commission.html">我的佣金</a></li>
          <li><a href="Member_Cash.html">申请提现</a></li>
        </ul>
      </div>
    </div>
    <div class="m_right">
      <p></p>
      <div class="mem_tit">收货地址</div>
      <div class="address">
        <div class="a_close"><a href="#"><img src="../assets/images/a_close.png" /></a></div>
        <table border="0" class="add_t" align="center" style="width:98%; margin:10px auto;" cellspacing="0" cellpadding="0">
          <tr>
            <td align="right" width="80">收货人姓名：</td>
            <td>{{name}}</td>
          </tr>
          <tr>
            <td align="right">配送区域：</td>
            <td>{{area}}</td>
          </tr>
          <tr>
            <td align="right">详细地址：</td>
            <td>{{address}}</td>
          </tr>
          <tr>
            <td align="right">手机：</td>
            <td>{{phone}}</td>
          </tr>
          <tr>
            <td align="right">电话：</td>
            <td>{{tel}}</td>
          </tr>
          <tr>
            <td align="right">电子邮箱：</td>
            <td>{{email}}</td>
          </tr>
          <tr>
            <td align="right">邮政编码：</td>
            <td>{{youbian}}</td>
          </tr>
          <tr>
            <td align="right">标志建筑：</td>
            <td>{{jianzhu}}</td>
          </tr>
        </table>

        <p align="right">
          <a href="#" style="color:#ff4e00;" @click="moren('MyDiv1','fade1')">设置默认地址</a>&nbsp; &nbsp; &nbsp; &nbsp;
          <a href="#" style="color:#ff4e00;" @click="update('MyDiv','fade')">编辑
        </a>&nbsp; &nbsp; &nbsp; &nbsp;
        </p>
      </div>

      <div id="fade1" class="black_overlay"></div>
      <div id="MyDiv1" class="white_content">
        <div class="white_d">
          <div class="notice_t">
            <span class="fr" style="margin-top:10px; cursor:pointer;" onclick="CloseDiv('MyDiv1','fade1')"><img src="../assets/images/close.gif" /></span>
          </div>
          <div class="notice_c">

            <table border="0" align="center" style="font-size:16px;" cellspacing="0" cellpadding="0">
              <tr valign="top" v-for="val,key in alladdress">
                <td><input type="button" value="设为默认" @click="shezhi(val.id)" onclick="CloseDiv('MyDiv1','fade1')"/>收货人姓名:{{val.name}},配送区域:{{val.area}},详细地址:{{val.address}},手机:{{val.phone}}</td>
              </tr>
              <tr height="50" valign="bottom">
                <td><a href="#" class="b_buy" onclick="CloseDiv('MyDiv1','fade1')">取消</a></td>
              </tr>
            </table>

          </div>
        </div>
      </div>


      <div id="fade" class="black_overlay"></div>
      <div id="MyDiv" class="white_content">
        <div class="white_d">
          <div class="notice_t">
            <span class="fr" style="margin-top:10px; cursor:pointer;" onclick="CloseDiv('MyDiv','fade')" @click="update1"><img src="../assets/images/close.gif" /></span>
          </div>
          <div class="notice_c">
            <table border="0" class="add_t" align="center" style="width:98%; margin:10px auto;" cellspacing="0" cellpadding="0">
              <tr>
                <td align="right" width="80">收货人姓名：</td>
                <td><input v-model="name"/></td>
              </tr>
              <tr>
                <td align="right">配送区域：</td>
                <td><select class="jj1" name="" data-flag="1" v-on:change="getCity($event)">
                  <option v-bind:value="0" selected="selected">请选择</option>
                  <option v-for="(item,index) in data" v-bind:value="item.area_id" v-bind:id="'a'+item.area_id">{{item.area_name}}</option>
                </select>
                  <select class="jj1" name="city" v-on:change="getDiqu($event)">
                    <option  v-bind:value="0" selected="selected">请选择</option>
                    <option v-for="(item,index) in city" v-bind:value="item.area_id" v-bind:id="'a'+item.area_id">{{item.area_name}}</option>
                  </select>
                  <select class="jj1" name="area" v-on:change="getDiqu1($event)">
                    <option value="0" selected="selected">请选择</option>
                    <option v-for="(item,index) in diqu" v-bind:value="item.area_id" v-bind:id="'a'+item.area_id">{{item.area_name}}</option>
                  </select></td>
              </tr>
              <tr>
                <td align="right">详细地址：</td>
                <td><input v-model="address"/></td>
              </tr>
              <tr>
                <td align="right">手机：</td>
                <td><input v-model="phone"/></td>
              </tr>
              <tr>
                <td align="right">电话：</td>
                <td><input v-model="tel"/></td>
              </tr>
              <tr>
                <td align="right">电子邮箱：</td>
                <td><input v-model="email"/></td>
              </tr>
              <tr>
                <td align="right">邮政编码：</td>
                <td><input v-model="youbian"/></td>
              </tr>
              <tr>
                <td align="right">标志建筑：</td>
                <td><input v-model="jianzhu"/></td>
              </tr>
              <tr height="50" valign="bottom">
                <td><a href="#" class="b_buy" onclick="CloseDiv('MyDiv','fade')" @click="update1">关闭</a></td>
              </tr>
            </table>
          </div>
        </div>
      </div>

      <div class="mem_tit">
        <a href="#"><img src="../assets/images/add_ad.gif" /></a>
      </div>
      <table border="0" class="add_tab" style="width:930px;"  cellspacing="0" cellpadding="0">
        <tr>
          <td width="135" align="right">配送地区</td>
          <td colspan="3" style="font-family:'宋体';">
            <select class="jj1" name="" data-flag="1" v-on:change="getCity($event)">
              <option v-bind:value="0" selected="selected">请选择</option>
              <option v-for="(item,index) in data" v-bind:value="item.area_id" v-bind:id="'a'+item.area_id">{{item.area_name}}</option>
            </select>
            <select class="jj1" name="city" v-on:change="getDiqu($event)">
              <option  v-bind:value="0" selected="selected">请选择</option>
              <option v-for="(item,index) in city" v-bind:value="item.area_id" v-bind:id="'a'+item.area_id">{{item.area_name}}</option>
            </select>
            <select class="jj1" name="area" v-on:change="getDiqu1($event)">
              <option value="0" selected="selected">请选择</option>
              <option v-for="(item,index) in diqu" v-bind:value="item.area_id" v-bind:id="'a'+item.area_id">{{item.area_name}}</option>
            </select>
            （必填）
          </td>
        </tr>
        <tr>
          <td align="right">收货人姓名</td>
          <td style="font-family:'宋体';"><input type="text" value="" class="add_ipt" id="name"/>（必填）</td>
          <td align="right">电子邮箱</td>
          <td style="font-family:'宋体';"><input type="text" value="" class="add_ipt"  id="email"/>（必填）</td>
        </tr>
        <tr>
          <td align="right">详细地址</td>
          <td style="font-family:'宋体';"><input type="text" value="" class="add_ipt"  id="address"/>（必填）</td>
          <td align="right">邮政编码</td>
          <td style="font-family:'宋体';"><input type="text" value="" class="add_ipt"  id="youbian"/></td>
        </tr>
        <tr>
          <td align="right">手机</td>
          <td style="font-family:'宋体';"><input type="text" value="" class="add_ipt"  id="phone"/>（必填）</td>
          <td align="right">电话</td>
          <td style="font-family:'宋体';"><input type="text" value="" class="add_ipt"  id="tel"/></td>
        </tr>
        <tr>
          <td align="right">标志建筑</td>
          <td style="font-family:'宋体';"><input type="text" value="" class="add_ipt"  id="jianzhu"/></td>
        </tr>
      </table>
      <p align="right">
        <a href="#">删除</a>&nbsp; &nbsp; <a @click="add1" class="add_b">添加</a>
      </p>



    </div>
  </div>
  <!--End 用户中心 End-->
  <!--Begin Footer Begin -->
  <div class="b_btm_bg b_btm_c">
    <div class="b_btm">
      <table border="0" style="width:210px; height:62px; float:left; margin-left:75px; margin-top:30px;" cellspacing="0" cellpadding="0">
        <tr>
          <td width="72"><img src="../assets/images/b1.png" width="62" height="62" /></td>
          <td><h2>正品保障</h2>正品行货  放心购买</td>
        </tr>
      </table>
      <table border="0" style="width:210px; height:62px; float:left; margin-left:75px; margin-top:30px;" cellspacing="0" cellpadding="0">
        <tr>
          <td width="72"><img src="../assets/images/b2.png" width="62" height="62" /></td>
          <td><h2>满38包邮</h2>满38包邮 免运费</td>
        </tr>
      </table>
      <table border="0" style="width:210px; height:62px; float:left; margin-left:75px; margin-top:30px;" cellspacing="0" cellpadding="0">
        <tr>
          <td width="72"><img src="../assets/images/b3.png" width="62" height="62" /></td>
          <td><h2>天天低价</h2>天天低价 畅选无忧</td>
        </tr>
      </table>
      <table border="0" style="width:210px; height:62px; float:left; margin-left:75px; margin-top:30px;" cellspacing="0" cellpadding="0">
        <tr>
          <td width="72"><img src="../assets/images/b4.png" width="62" height="62" /></td>
          <td><h2>准时送达</h2>收货时间由你做主</td>
        </tr>
      </table>
    </div>
  </div>
  <div class="b_nav">
    <dl>
      <dt><a href="#">新手上路</a></dt>
      <dd><a href="#">售后流程</a></dd>
      <dd><a href="#">购物流程</a></dd>
      <dd><a href="#">订购方式</a></dd>
      <dd><a href="#">隐私声明</a></dd>
      <dd><a href="#">推荐分享说明</a></dd>
    </dl>
    <dl>
      <dt><a href="#">配送与支付</a></dt>
      <dd><a href="#">货到付款区域</a></dd>
      <dd><a href="#">配送支付查询</a></dd>
      <dd><a href="#">支付方式说明</a></dd>
    </dl>
    <dl>
      <dt><a href="#">会员中心</a></dt>
      <dd><a href="#">资金管理</a></dd>
      <dd><a href="#">我的收藏</a></dd>
      <dd><a href="#">我的订单</a></dd>
    </dl>
    <dl>
      <dt><a href="#">服务保证</a></dt>
      <dd><a href="#">退换货原则</a></dd>
      <dd><a href="#">售后服务保证</a></dd>
      <dd><a href="#">产品质量保证</a></dd>
    </dl>
    <dl>
      <dt><a href="#">联系我们</a></dt>
      <dd><a href="#">网站故障报告</a></dd>
      <dd><a href="#">购物咨询</a></dd>
      <dd><a href="#">投诉与建议</a></dd>
    </dl>
    <div class="b_tel_bg">
      <a href="#" class="b_sh1">新浪微博</a>
      <a href="#" class="b_sh2">腾讯微博</a>
      <p>
        服务热线：<br />
        <span>400-123-4567</span>
      </p>
    </div>
    <div class="b_er">
      <div class="b_er_c"><img src="../assets/images/er.gif" width="118" height="118" /></div>
      <img src="../assets/images/ss.png" />
    </div>
  </div>
  <div class="btmbg">
    <div class="btm">
      备案/许可证编号：蜀ICP备12009302号-1-www.dingguagua.com   Copyright © 2015-2018 尤洪商城网 All Rights Reserved. 复制必究 , Technical Support: Dgg Group <br />
      <img src="../assets/images/b_1.gif" width="98" height="33" /><img src="../assets/images/b_2.gif" width="98" height="33" /><img src="../assets/images/b_3.gif" width="98" height="33" /><img src="../assets/images/b_4.gif" width="98" height="33" /><img src="../assets/images/b_5.gif" width="98" height="33" /><img src="../assets/images/b_6.gif" width="98" height="33" />
    </div>
  </div>
  <!--End Footer End -->
</div>
  </div>
</template>
<script>
    import axios from 'axios'
    import global from './Common.vue'
    export default {
        data () {
            return {
                data:[],
                arr:[],
                city:"",
                diqu:"",
                data1:"",
                provinceId:"",
                alladdress:"",
                token:localStorage.getItem("token"),
                globalAjaxUrl: global.ajaxUrl,
                name:"未填写",
                area:"未填写",
                address:"未填写",
                phone:"未填写",
                tel:"未填写",
                jianzhu:"未填写",
                email:"未填写",
                youbian:"未填写",
            }

        },
        methods : {
            shezhi:function(id){
                axios.post(this.globalAjaxUrl+'api/address/shezhi',{
                    id:id,
                    token:this.token,
                })
                    .then(response=> {
                       history.go(0)
                    })
                    .catch(function (error) { // 请求失败处理
                        console.log(error);
                    });

            },
            moren:function(show_div,bg_div){
                document.getElementById(show_div).style.display='block';
                document.getElementById(bg_div).style.display='block' ;
                var bgdiv = document.getElementById(bg_div);
                bgdiv.style.width = document.body.scrollWidth;
                $("#"+bg_div).height($(document).height());
                axios.post(this.globalAjaxUrl+'api/address/alladdress',{
                    token:this.token,
                })
                    .then(response=> {
                        console.log(response)
                        this.alladdress=response.data
                    })
                    .catch(function (error) { // 请求失败处理
                        console.log(error);
                    });
            },
            update:function(show_div,bg_div){
                document.getElementById(show_div).style.display='block';
                document.getElementById(bg_div).style.display='block' ;
                var bgdiv = document.getElementById(bg_div);
                bgdiv.style.width = document.body.scrollWidth;
                $("#"+bg_div).height($(document).height());
                axios.post(this.globalAjaxUrl+'api/address/update',{
                    token:this.token,
                })
                    .then(response=> {
                        console.log(response)
                        this.area=response.data[0].area
                    })
                    .catch(function (error) { // 请求失败处理
                        console.log(error);
                    });
            },
            update1:function(){
                axios.post(this.globalAjaxUrl+'api/address/update',{
                    token:this.token,
                    name:this.name,
                    arr1:this.arr,
                    address:this.address,
                    phone:this.phone,
                    tel:this.tel,
                    jianzhu:this.jianzhu,
                    email:this.email,
                    youbian:this.youbian
                })
                    .then(response=> {
                        console.log(response)
                        this.area=response.data[0].area
                    })
                    .catch(function (error) { // 请求失败处理
                        console.log(error);
                    });
            },
            getCity:function (e) {
                var pid=e.target.value
                var name=document.getElementById("a"+pid).innerText
                this.arr[0]=name
                axios.post(this.globalAjaxUrl+'api/address/area',{
                    pid:pid
                })
                    .then(response=> {
                        this.city=response.data
                    })
                    .catch(function (error) { // 请求失败处理
                        console.log(error);
                    });
            },
            getDiqu:function (e) {
                var pid=e.target.value
                var name=document.getElementById("a"+pid).innerText
                this.arr[1]=name
                axios.post(this.globalAjaxUrl+'api/address/area',{
                    pid:pid
                })
                    .then(response=> {
                        this.diqu=response.data
                        //  console.log(123)
                        console.log(this.diqu)
                    })
                    .catch(function (error) { // 请求失败处理
                        console.log(error);
                    });
            },
            getDiqu1:function (e) {
                var pid=e.target.value
                var name=document.getElementById("a"+pid).innerText
                this.arr[2]=name
            },
            add1:function () {
                console.log(this.arr)
                axios.post(this.globalAjaxUrl+'api/address/addaddress',{
                    name:$("#name").val(),
                    area:$("#area").val(),
                    address:$("#address").val(),
                    phone:$("#phone").val(),
                    tel:$("#tel").val(),
                    jianzhu:$("#jianzhu").val(),
                    email:$("#email").val(),
                    youbian:$("#youbian").val(),
                    arr1:this.arr,
                    token:this.token
                })
                    .then(response=> {
                        console.log(response)
                        if(response.data.status=='error')
                            alert(response.data.data)
                        else{
                            this.data=response.data
                            console.log(this.data)
                        }

                    })
                    .catch(function (error) { // 请求失败处理
                        console.log(error);
                    });
            }
        },
        mounted () {
            axios.post(this.globalAjaxUrl+'api/address/area',{
                pid:1
            })
                .then(response=> {
                    this.data=response.data
                  //  console.log(123)
                    console.log(this.data)
                })
                .catch(function (error) { // 请求失败处理
                    console.log(error);
                });
            axios.post(this.globalAjaxUrl+'api/address/address',{
                token:this.token
            })
                .then(response=> {
                    this.name=response.data[0].name,
                    this.area=response.data[0].area,
                        this.address=response.data[0].address,
                        this.phone=response.data[0].phone,
                        this.tel=response.data[0].tel,
                        this.jianzhu=response.data[0].jianzhu,
                        this.email=response.data[0].email,
                        this.youbian=response.data[0].youbian
                    //console.log( this.data1)
                })
                .catch(function (error) { // 请求失败处理
                    console.log(error);
                });
        },
    }
</script>

